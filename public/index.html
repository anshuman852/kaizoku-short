<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kaizoku Shortner</title>
    <style>
      html body {
        min-height: 90vh;
        display: flex;
        font-family: "Inter UI", "Inter", Arial;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      .shortlenk {
        line-height: 50px;
        font-size: 28px;
        font-weight: 600;
        color: #2b3044;
        padding: 50px;
        border-color: #2b3044;
        border-width: 3px;
        display: inline-block;
      }
      .shortlenk a {
        text-decoration: none;
        color: #2571af;
      }
      .heading {
        line-height: 50px;
        font-size: 42px;
        font-weight: 600;
        color: #2b3044;
        padding: 50px;
        display: inline-block;
      }
      .container {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: row;
        flex-wrap: wrap;
        flex-basis: content;
      }
      .lenk {
        color: #2b3044;
        background: #fff;
        display: block;
        padding: 8px 28px;
        border-radius: 20px;
        line-height: 24px;
        font-size: 14px;
        font-weight: 600;
        letter-spacing: 0.02em;
        border-color: #2b3044;
        border-width: 3px;
        border-style: dashed;
        outline: none;
        position: relative;
        width: 50vw;
        margin: 10px;
      }
      .button {
        color: #fff;
        background: #2b3044;
        display: block;
        padding: 8px 28px;
        border-radius: 20px;
        line-height: 24px;
        font-size: 14px;
        font-weight: 600;
        letter-spacing: 0.02em;
        border-color: #2b3044;
        border-width: 3px;
        border-style: solid;
        outline: none;
        position: relative;
        overflow: hidden;
        cursor: pointer;
      }

      .button.in {
        --name: move;
      }
      .button.in:not(.out) {
        --c: var(--color-hover);
        --b: var(--background-hover);
      }
      .button.in:not(.out):before,
      .button.in:not(.out):after {
        --y: 0;
        --br: 5%;
      }
      .button.in:not(.out):after {
        --br: 10%;
        --d-d: 0.02s;
      }
      .button.in.out {
        --name: move-out;
      }
      .button.in.out:before {
        --d-d: 0.06s;
      }

      .button div {
        z-index: 1;
        position: relative;
        display: -webkit-box;
        display: flex;
      }
      .button div span {
        display: block;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-animation: var(--name, none) 0.7s linear forwards 0.18s;
        animation: var(--name, none) 0.7s linear forwards 0.18s;
      }

      @-webkit-keyframes move {
        30%,
        36% {
          -webkit-transform: translateY(calc(-6px * var(--move))) translateZ(0)
            rotate(calc(-13deg * var(--rotate) * var(--part)));
          transform: translateY(calc(-6px * var(--move))) translateZ(0)
            rotate(calc(-13deg * var(--rotate) * var(--part)));
        }
        50% {
          -webkit-transform: translateY(calc(3px * var(--move))) translateZ(0)
            rotate(calc(6deg * var(--rotate) * var(--part)));
          transform: translateY(calc(3px * var(--move))) translateZ(0)
            rotate(calc(6deg * var(--rotate) * var(--part)));
        }
        70% {
          -webkit-transform: translateY(calc(-2px * var(--move))) translateZ(0)
            rotate(calc(-3deg * var(--rotate) * var(--part)));
          transform: translateY(calc(-2px * var(--move))) translateZ(0)
            rotate(calc(-3deg * var(--rotate) * var(--part)));
        }
      }

      @keyframes move {
        30%,
        36% {
          -webkit-transform: translateY(calc(-6px * var(--move))) translateZ(0)
            rotate(calc(-13deg * var(--rotate) * var(--part)));
          transform: translateY(calc(-6px * var(--move))) translateZ(0)
            rotate(calc(-13deg * var(--rotate) * var(--part)));
        }
        50% {
          -webkit-transform: translateY(calc(3px * var(--move))) translateZ(0)
            rotate(calc(6deg * var(--rotate) * var(--part)));
          transform: translateY(calc(3px * var(--move))) translateZ(0)
            rotate(calc(6deg * var(--rotate) * var(--part)));
        }
        70% {
          -webkit-transform: translateY(calc(-2px * var(--move))) translateZ(0)
            rotate(calc(-3deg * var(--rotate) * var(--part)));
          transform: translateY(calc(-2px * var(--move))) translateZ(0)
            rotate(calc(-3deg * var(--rotate) * var(--part)));
        }
      }
      @-webkit-keyframes move-out {
        30%,
        36% {
          -webkit-transform: translateY(calc(6px * var(--move))) translateZ(0)
            rotate(calc(13deg * var(--rotate) * var(--part)));
          transform: translateY(calc(6px * var(--move))) translateZ(0)
            rotate(calc(13deg * var(--rotate) * var(--part)));
        }
        50% {
          -webkit-transform: translateY(calc(-3px * var(--move))) translateZ(0)
            rotate(calc(-6deg * var(--rotate) * var(--part)));
          transform: translateY(calc(-3px * var(--move))) translateZ(0)
            rotate(calc(-6deg * var(--rotate) * var(--part)));
        }
        70% {
          -webkit-transform: translateY(calc(2px * var(--move))) translateZ(0)
            rotate(calc(3deg * var(--rotate) * var(--part)));
          transform: translateY(calc(2px * var(--move))) translateZ(0)
            rotate(calc(3deg * var(--rotate) * var(--part)));
        }
      }
      @keyframes move-out {
        30%,
        36% {
          -webkit-transform: translateY(calc(6px * var(--move))) translateZ(0)
            rotate(calc(13deg * var(--rotate) * var(--part)));
          transform: translateY(calc(6px * var(--move))) translateZ(0)
            rotate(calc(13deg * var(--rotate) * var(--part)));
        }
        50% {
          -webkit-transform: translateY(calc(-3px * var(--move))) translateZ(0)
            rotate(calc(-6deg * var(--rotate) * var(--part)));
          transform: translateY(calc(-3px * var(--move))) translateZ(0)
            rotate(calc(-6deg * var(--rotate) * var(--part)));
        }
        70% {
          -webkit-transform: translateY(calc(2px * var(--move))) translateZ(0)
            rotate(calc(3deg * var(--rotate) * var(--part)));
          transform: translateY(calc(2px * var(--move))) translateZ(0)
            rotate(calc(3deg * var(--rotate) * var(--part)));
        }
      }
    </style>
  </head>
  <body>
    <div class="heading">Kaizoku Shortner</div>
    <form id="hello">
      <div class="container">
        <input type="text" name="longurl" id="lgu" class="lenk" />
        <button type="submit" class="button">Generate Link</button>
      </div>
    </form>
    <div class="shortlenk" id="sl"></div>
  </body>
</html>

<script>
  hello.onsubmit = async (e) => {
    e.preventDefault();
    let url = document.getElementById("lgu").value;
    let response = await fetch("/short", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ longurl: url }),
    });

    let result = await response.json();
    let shortlenk = document.getElementById("sl");
    shortlenk.innerHTML =
      'Your short link is <a href="https://short.anshuman852.dev/' +
      result.shorturl +
      '">here</a>';
  };
</script>
<script>
  let button = document.querySelector(".button");
  let div = document.createElement("div"),
    letters = button.textContent.trim().split("");

  function elements(letter, index, array) {
    let element = document.createElement("span"),
      part = index >= array.length / 2 ? -1 : 1,
      position =
        index >= array.length / 2
          ? array.length / 2 - index + (array.length / 2 - 1)
          : index,
      move = position / (array.length / 2),
      rotate = 1 - move;

    element.innerHTML = !letter.trim() ? "&nbsp;" : letter;
    element.style.setProperty("--move", move);
    element.style.setProperty("--rotate", rotate);
    element.style.setProperty("--part", part);

    div.appendChild(element);
  }

  letters.forEach(elements);

  button.innerHTML = div.outerHTML;

  button.addEventListener("mouseenter", (e) => {
    if (!button.classList.contains("out")) {
      button.classList.add("in");
    }
  });

  button.addEventListener("mouseleave", (e) => {
    if (button.classList.contains("in")) {
      button.classList.add("out");
      setTimeout(() => button.classList.remove("in", "out"), 950);
    }
  });
</script>
